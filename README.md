# ğŸ“˜ BLISS: Business Language Interface for Self-Serve SQL

A proof-of-concept (PoC) tool that lets business users ask questions in plain English and instantly get SQL queries â€” powered by an LLM and a lightweight rule engine.

---

## âœ… What This Does

- Translates natural language questions into SQL using:
  - ğŸ¤– A local LLM (Mistral via Ollama)
  - ğŸ§  A rule-based SQL generator
- Provides context from:
  - ERD (YAML format)
  - Business glossary (CSV with table/column mapping + synonyms)
  - Optional schema metadata
- Displays matched business terms
- ğŸ“˜ Exposes glossary in UI (inline and full view)
- Lets users compare LLM and rule-based SQL outputs

---

## ğŸ§± Architecture Overview

| Layer              | Status | Highlights |
|-------------------|--------|------------|
| Metadata Loader   | âœ…     | Loads YAML + CSV metadata cleanly |
| LLM Prompt Adapter| âœ…     | Structured prompt creation with glossary/ERD |
| Rule Engine       | âœ…     | ERD-based keyword matching for basic SQL |
| Controller        | âœ…     | Routes question through both engines |
| UI (Streamlit)    | âœ…     | Clean UX with toggles, term highlighting |

---

## ğŸ§© Current Capabilities

- Ask business questions
- See SQL generated by:
  - LLM (via formatted prompt)
  - Rule engine (fallback logic)
- View matched business glossary terms
- Browse glossary as table
- Easily toggle advanced dev views

---

## ğŸ› ï¸ Next Steps

### ğŸ¯ Short-Term

| Area     | Goal |
|----------|------|
| Backend  | âœ… Execute SQL on local DB (e.g., SQLite, DuckDB) |
| Backend  | âœ… Add SQL validation & formatting (e.g., via sqlglot) |
| Frontend | âœ… Display tabular results from backend |
| Frontend | âœ… Show matched glossary terms in UI |
| Frontend | âœ… Add glossary toggle (full glossary + inline) |
| Frontend | ğŸ”² Add feedback loop (flag incorrect SQL) |

### ğŸ“Š Output Features (Coming Soon)

| Feature         | Benefit |
|----------------|---------|
| ğŸ“ˆ Visual Charts | Plot results for quick insights |
| ğŸ“ CSV Download | Export results easily |
| ğŸ§  Term Tracing | Map glossary terms â†’ SQL columns |

---

## ğŸ“ File Structure

```
bliss-sanssql-poc/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py            # FastAPI app
â”‚   â”œâ”€â”€ controller.py      # Orchestrates LLM + rule engine
â”‚   â”œâ”€â”€ llm_adapter.py     # Formats prompt, calls LLM
â”‚   â”œâ”€â”€ rule_engine.py     # Basic SQL generation from ERD
â”‚   â”œâ”€â”€ metadata_loader.py # Loads ERD, glossary, metadata
â”‚
â”œâ”€â”€ metadata/
â”‚   â”œâ”€â”€ erd.yaml           # Tables, columns, joins
â”‚   â”œâ”€â”€ glossary.csv       # Business terms â†’ table.column
â”‚   â””â”€â”€ schema_metadata.yaml (optional)
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ streamlit_app.py   # Streamlit UI
```

---

## ğŸš€ Getting Started

```bash
# 1. Start backend
cd backend
uvicorn main:app --reload

# 2. Run frontend
cd ../frontend
streamlit run streamlit_app.py
```

---

## ğŸ™Œ Credits & Notes

- Built by Ram with ChatGPT as a thinking and engineering partner ğŸ’¬
- Mistral runs locally via Ollama for fast LLM inference
- Designed to be modular and beginner-friendly
- Best used as a template for more vertical-specific self-serve analytics tools

---

## âœ… Status: Working Prototype

This PoC is end-to-end functional for generating and interpreting SQL.
Next: execute SQL, visualize results, and enable export.


